<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Returns a new function that debounces calls to the passed function. This function can be cloned however many times you want and passed across threads."><title>debounce in wiwi::debounce - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-dd39b87e5fcfba68.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="wiwi" data-themes="meadow" data-resource-suffix="" data-rustdoc-version="1.80.0-nightly (ab14f944a 2024-05-13)" data-channel="nightly" data-search-js="search-d52510db62a78183.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../static.files/storage-118b08c4c78b968e.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../wiwi/index.html">wiwi</a><span class="version">0.6.1</span></h2></div><div class="sidebar-elems"><h2><a href="index.html">In wiwi::debounce</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Function <a href="../index.html">wiwi</a>::<wbr><a href="index.html">debounce</a>::<wbr><a class="fn" href="#">debounce</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../../src/wiwi/debounce.rs.html#42-47">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub fn debounce(
    f: impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>() + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'static,
    wait_in_ms: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>
) -&gt; impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>() + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> + 'static</code></pre><span class="item-info"><div class="stab portability">Available on <strong>crate feature <code>debounce</code></strong> only.</div></span><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Returns a new function that debounces calls to the passed function. This
function can be cloned however many times you want and passed across threads.</p>
<p>If the feature <code>debounce-dyn-fn</code> is enabled, this function (and the other 3 exposed) will
wrap the function into a <code>Box&lt;dyn Fn&gt;</code>, to use dynamic dispatch and avoid
monomorphisation binary size cost.</p>
<p>If you would like to call the provided function on the leading edge,
<a href="fn.debounce_immediate.html" title="fn wiwi::debounce::debounce_immediate"><code>debounce_immediate</code></a> is what you’re after.</p>
<p>Note: requires async runtime to run, and must be called in the context of
an async runtime. The returned function however, does not have to be called
in an async runtime context. If you would like to initialise a debounced
function in a non-async context, and have a runtime handle that will outlive
the debounced function, <a href="fn.debounce_with_rt.html" title="fn wiwi::debounce::debounce_with_rt"><code>debounce_with_rt</code></a> and <a href="fn.debounce_immediate_with_rt.html" title="fn wiwi::debounce::debounce_immediate_with_rt"><code>debounce_immediate_with_rt</code></a>
may be interesting.</p>
<p>The reason a runtime is needed: debounce spawns two background tasks on
the runtime. One of them receives messages from the calls, and stores the
time in which the last call occured. The second one is the one that owns the
passed function, and is the one reading the times the first task stores,
sleeping for the right amount of time, then calling the function. These
background tasks will exit themself after the last debounced handle is dropped.</p>
<p>If the background tasks get stopped (caused by ex. the backing runtime is
stopped), then the returned debounce function will panic.</p>
<p>I suppose there could be two threads spawned in the background, but that
felt like an overkill thing heh, perhaps there could be a static runtime
available here, enabled with a feature.</p>
</div></details></section></div></main></body></html>