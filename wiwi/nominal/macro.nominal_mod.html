<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Declare many new nominal types (aliases), in a module"><title>nominal_mod in wiwi::nominal - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-590a400c.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="wiwi" data-themes="meadow" data-resource-suffix="" data-rustdoc-version="1.84.0-nightly (b3f75cc87 2024-11-02)" data-channel="nightly" data-search-js="search-c5a66128.js" data-settings-js="settings-0f613d39.js" ><script src="../../static.files/storage-59e33391.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc macro"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../wiwi/index.html">wiwi</a><span class="version">0.11.0-pre.1</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">nominal_<wbr>mod</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#examples" title="Examples">Examples</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="index.html">In wiwi::<wbr>nominal</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="../index.html">wiwi</a>::<wbr><a href="index.html">nominal</a></span><h1>Macro <span class="macro">nominal_mod</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/wiwi/nominal.rs.html#173-192">Source</a> </span></div><pre class="rust item-decl"><span class="macro">macro_rules!</span> nominal_mod {
    {
		$(
			<span class="macro-nonterminal">$mod_vis</span>:vis <span class="kw">mod </span><span class="macro-nonterminal">$mod_name</span>:ident {
				$( <span class="macro">nominal!</span>(<span class="macro-nonterminal">$item_vis</span>:vis <span class="macro-nonterminal">$name</span>:ident, wraps: $( <span class="kw-2">ref </span>&lt;$(<span class="macro-nonterminal">$lifetimes</span>:lifetime),+&gt; )<span class="question-mark">? </span><span class="macro-nonterminal">$</span><span class="kw">type</span>:<span class="macro-nonterminal">ty</span>); )*
			}
		)*
	} =&gt; { ... };
}</pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Declare many new nominal types (aliases), in a module</p>
<p>Usage is more or less identical to <a href="macro.nominal.html" title="macro wiwi::nominal::nominal"><code>nominal</code></a>, but you define a module
inside the macro invocation. Because this macro creates a new module
(with the name you specify), and the created module is only used for defining
these
nominal types, there can be nothing else in there, which we take advantage of
to create a <code>marker</code> submodule to define marker types in. This way it can have
a new namespace just for the marker types, so reusing the newtype name won’t
collide with anything else.</p>
<p>So, all of that is to say this macro also saves you a bit of boilerplate
declaring names for the newtype ZSTs.</p>
<h2 id="examples"><a class="doc-anchor" href="#examples">§</a>Examples</h2>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="macro">nominal_mod!</span> {
   <span class="kw">pub mod </span>nominal {
      <span class="macro">nominal!</span>(<span class="kw">pub </span>NewType, wraps: String);
   }
}

<span class="kw">let </span>item = nominal::NewType::new(String::new());</code></pre></div>
<p>Still creating newtypes as expected:</p>

<div class="example-wrap compile_fail"><a href="#" class="tooltip" title="This example deliberately fails to compile">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="macro">nominal_mod!</span> {
   <span class="kw">pub mod </span>nominal {
      <span class="macro">nominal!</span>(<span class="kw">pub </span>NewType, wraps: String);
      <span class="macro">nominal!</span>(<span class="kw">pub </span>AnotherNewType, wraps: String);
   }
}

<span class="kw">let </span>item: nominal::NewType = nominal::NewType::new(String::new());
<span class="comment">// this won't compile
</span><span class="kw">let </span>another_item: nominal::NewType = nominal::AnotherNewType::new(String::new());</code></pre></div>
<p>Still “just” a type alias:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code>
<span class="kw">let </span>item: nominal::NewType = Nominal::new(String::new());</code></pre></div>
<p>Created marker structs are in a <code>marker</code> submodule:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code>
<span class="kw">let </span>item: Nominal&lt;String, nominal::marker::NewType&gt; = nominal::NewType::new(String::new());
<span class="kw">let </span>item: Nominal&lt;String, nominal::marker::AnotherNewType&gt; = nominal::AnotherNewType::new(String::new());</code></pre></div>
</div></details></section></div></main></body></html>