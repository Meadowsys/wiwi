<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Fast and efficient implementation of Z85"><title>wiwi::z85 - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-dd39b87e5fcfba68.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="wiwi" data-themes="meadow" data-resource-suffix="" data-rustdoc-version="1.80.0-nightly (ab14f944a 2024-05-13)" data-channel="nightly" data-search-js="search-d52510db62a78183.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../static.files/storage-118b08c4c78b968e.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../wiwi/index.html">wiwi</a><span class="version">0.7.0</span></h2></div><h2 class="location"><a href="#">Module z85</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#enums">Enums</a></li><li><a href="#constants">Constants</a></li><li><a href="#functions">Functions</a></li></ul></section><h2><a href="../index.html">In crate wiwi</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">wiwi</a>::<wbr><a class="mod" href="#">z85</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../../src/wiwi/z85/mod.rs.html#1-508">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><span class="item-info"><div class="stab portability">Available on <strong>crate feature <code>z85</code></strong> only.</div></span><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Fast and efficient implementation of Z85</p>
<p>Includes nonstandard padding. The Z85 spec explicitly says that the application
needs to handle padding the length to a multiple of 4. If input length is a
multiple of 4, no padding is added.</p>
<h2 id="nonstandard-padding-implementation"><a class="doc-anchor" href="#nonstandard-padding-implementation">§</a>Nonstandard padding implementation</h2>
<p><strong>Encoding</strong>: If padding is needed, the amount of padding that was added in bytes
is encoded (ex. 1B padding -&gt; <code>1</code> since <code>TABLE_ENCODER[1] == b'1'</code>)
and appended to the end of the string. (1 extra byte)</p>
<p><strong>Decoding</strong>: If the len of the slice passed is one more than a multiple of 5
(ie. <code>(n * 5) + 1</code>), it is trimmed off the slice, decoded to get amount of
padding needed, and held onto. Then while decoding the last frame, we take
that stored amount of padding, and remove that amount from the end of the
decoded bytes.</p>
<p>Original Z85 spec: <a href="https://rfc.zeromq.org/spec/32">https://rfc.zeromq.org/spec/32</a></p>
</div></details><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.DecodeError.html" title="enum wiwi::z85::DecodeError">DecodeError</a></div><div class="desc docblock-short">Errors that can be encountered on decoding data (encoding data does not error)</div></li></ul><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="constant" href="constant.BINARY_FRAME_LEN.html" title="constant wiwi::z85::BINARY_FRAME_LEN">BINARY_FRAME_LEN</a></div><div class="desc docblock-short">One frame of this many bytes (4) from the binary data maps to one frame of
<a href="constant.STRING_FRAME_LEN.html" title="constant wiwi::z85::STRING_FRAME_LEN"><code>STRING_FRAME_LEN</code></a> bytes in encoded Z85 output.</div></li><li><div class="item-name"><a class="constant" href="constant.STRING_FRAME_LEN.html" title="constant wiwi::z85::STRING_FRAME_LEN">STRING_FRAME_LEN</a></div><div class="desc docblock-short">One frame of this many bytes (5) from the encoded Z85 data maps to one frame
of <a href="constant.BINARY_FRAME_LEN.html" title="constant wiwi::z85::BINARY_FRAME_LEN"><code>BINARY_FRAME_LEN</code></a> bytes (4) in binary data.</div></li><li><div class="item-name"><a class="constant" href="constant.TABLE_DECODER.html" title="constant wiwi::z85::TABLE_DECODER">TABLE_DECODER</a></div><div class="desc docblock-short">Table to map any byte to Option of a number 0-84.</div></li><li><div class="item-name"><a class="constant" href="constant.TABLE_DECODER_LEN.html" title="constant wiwi::z85::TABLE_DECODER_LEN">TABLE_DECODER_LEN</a></div><div class="desc docblock-short">Length of the decoding table</div></li><li><div class="item-name"><a class="constant" href="constant.TABLE_ENCODER.html" title="constant wiwi::z85::TABLE_ENCODER">TABLE_ENCODER</a></div><div class="desc docblock-short">Table to map a number 0-84 to a Z85 character.</div></li><li><div class="item-name"><a class="constant" href="constant.TABLE_ENCODER_LEN.html" title="constant wiwi::z85::TABLE_ENCODER_LEN">TABLE_ENCODER_LEN</a></div><div class="desc docblock-short">Length of the encoding table (ie. number of different characters)</div></li></ul><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.decode_z85.html" title="fn wiwi::z85::decode_z85">decode_z85</a></div><div class="desc docblock-short">Decodes a slice of of a Z85 string back into the source bytes</div></li><li><div class="item-name"><a class="fn" href="fn.encode_z85.html" title="fn wiwi::z85::encode_z85">encode_z85</a></div><div class="desc docblock-short">Encodes a slice of bytes into a Z85 string, adding padding if necessary</div></li></ul></section></div></main></body></html>