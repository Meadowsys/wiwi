[workspace]
members = [
	"bindings",
	"macro",
	"scripts"
]

[workspace.package]
version = "0.10.0-dev"
edition = "2021"
authors = ["Meadowsys <meadowsys@kiwin.gay>"]
repository = "https://github.com/meadowsys/wiwi"
license = "MIT"

[package]
name = "wiwi"
description = "A library, of, Stuffâ„¢"
version = { workspace = true }
edition = { workspace = true }
authors = { workspace = true }
repository = { workspace = true }
license = { workspace = true }
exclude = [
	".cargo",
	".github",
	"codecov.yml",
	"rust-toolchain.toml"
]
categories = [
	# "data-structures" # ?
	# "internationalization" # ?
	# "localization" # ?
	# "mathematics" # ?
	# "encoding" # ?
	"rust-patterns"
	# "wasm" # ?
	# "web-programming" # ?
]
keywords = [
	"fundamental",
	"general",
	"general-purpose",
	"z85"
]

# ----- start autogenerated region (see gen-features script) -----

[dependencies]
wiwiwiwiwi = { path = "macro", version = "=0.10.0-dev" }

argon2 = { version = "0.5.3", optional = true }
chacha20poly1305 = { version = "0.10.1", optional = true }
chrono = { version = "0.4.35", optional = true, features = ["clock"] }
hashbrown = { version = "0.14.3", optional = true, features = ["ahash"] }
httparse = { version = "1.8.0", optional = true }
image = { version = "0.25.1", optional = true }
ordered-float = { version = "4.2.0", optional = true }
p384 = { version = "0.13.0", optional = true }
parking_lot = { version = "0.12.1", optional = true }
rand = { version = "0.8.5", optional = true }
rand_chacha = { version = "0.3.1", optional = true }
serde_json = { version = "1.0.116", optional = true }
spin_sleep = { version = "1.2.0", optional = true }
thiserror = { version = "1.0.58", optional = true }
tokio = { version = "1.36.0", optional = true, features = ["full"] }
url = { version = "2.5.0", optional = true }
uuid = { version = "1.8.0", optional = true }
zeroize = { version = "1.7.0", optional = true }

[features]
all = ["augment-panic-hook", "clock-timer", "debounce", "export-all-submodules", "h", "hex", "lazy-wrap", "nominal", "rand", "with-cloned", "z85"]
all-unstable = ["all", "aoc-unstable", "auth-unstable", "bitstream-unstable", "chainer-unstable", "cli-unstable", "defer-unstable", "id-unstable", "int-unstable", "iter-unstable", "lsl-unstable", "mcu-unstable", "memory-usage-unstable", "minesweeper-unstable", "num-traits-unstable", "path-unstable", "serialiser-binary-unstable", "serialiser-text-unstable", "string-pool-unstable", "sudoku-unstable", "unicode-unstable"]
all-addons = ["hashbrown", "image", "large-tuples", "nightly", "omega-tuples-of-doom", "serde-json"]

aoc-unstable = [
	"iter-unstable"
]
augment-panic-hook = []
auth-unstable = [
	"dep:argon2",
	"dep:chacha20poly1305",
	"dep:chrono",
	"dep:p384",
	"dep:rand",
	"dep:thiserror",
	"dep:zeroize",
	"z85"
]
bitstream-unstable = [
	"num-traits-unstable"
]
chainer-unstable = []
cli-unstable = []
clock-timer = [
	"dep:chrono",
	"dep:tokio"
]
debounce = [
	"dep:chrono",
	"dep:tokio",
	"num-traits-unstable"
]
defer-unstable = []
export-all-submodules = []
h = []
hex = [
	"dep:thiserror",
	"num-traits-unstable"
]
id-unstable = [
	"dep:rand",
	"num-traits-unstable"
]
int-unstable = [
	"wiwiwiwiwi/int",
	"num-traits-unstable"
]
iter-unstable = []
lazy-wrap = [
	"dep:parking_lot"
]
lsl-unstable = [
	"dep:hashbrown",
	"id-unstable"
]
mcu-unstable = [
	"num-traits-unstable"
]
memory-usage-unstable = [
	"wiwiwiwiwi/memory-usage"
]
minesweeper-unstable = [
	"dep:rand",
	"chainer-unstable",
	"iter-unstable",
	"num-traits-unstable",
	"z85"
]
nominal = []
num-traits-unstable = [
	"export-all-submodules",
	"int-unstable"
]
path-unstable = []
rand = [
	"dep:rand",
	"dep:rand_chacha"
]
serialiser-binary-unstable = [
	"dep:ordered-float"
]
serialiser-text-unstable = []
string-pool-unstable = [
	"dep:hashbrown",
	"lazy-wrap"
]
sudoku-unstable = [
	"chainer-unstable",
	"iter-unstable",
	"num-traits-unstable"
]
unicode-unstable = [
	"wiwiwiwiwi/unicode"
]
with-cloned = []
z85 = [
	"dep:thiserror",
	"num-traits-unstable"
]

# addon features
hashbrown = [
	"dep:hashbrown"
]
image = [
	"dep:image"
]
large-tuples = []
nightly = []
omega-tuples-of-doom = [
	"large-tuples"
]
serde-json = [
	"dep:serde_json"
]

# ----- end autogenerated region -----

[dev-dependencies]
criterion = { version = "0.5.1", features = ["html_reports"] }
hex = "0.4.3"
rand = "0.8.5"
z85 = "3.0.5"

[[bench]]
name = "hex-and-z85"
required-features = [
	# "base32",
	# "base64",
	"hex",
	"z85",
]
harness = false

[profile.bench]
lto = "thin"

[package.metadata.docs.rs]
# https://docs.rs/about/metadata

# https://users.rust-lang.org/t/how-to-document-optional-features-in-api-docs/64577
rustdoc-args = ["--cfg", "docsrs"]

features = [
	"all",

	# addon features
	"hashbrown",
	"image",
	"serde-json"
]

targets = [
	"aarch64-apple-darwin",
	"x86_64-apple-darwin",
	"x86_64-unknown-linux-gnu",
	"x86_64-pc-windows-msvc"
]
